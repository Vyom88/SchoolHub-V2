<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SchoolHub</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    {% load crispy_forms_tags %}


    <script>
        domain = "http://127.0.0.1:8000";
        function teacherbutton() {
            window.location.replace(domain + "/register/teacher-sign-up");
        }

        function redirect_to_login_page() {
            window.location.replace(domain + "/login");
        }

        function redirect_to_sign_up_page() {
            window.location.replace(domain + "/register/student-sign-up");
        }

        function redirect_to_teacher_home_page() {
            window.location.replace(domain + "/teacher-home");
        }

        function redirect_to_student_home_page() {
            window.location.replace(domain + "/student-home");

        }

        function teacher_event_page() {
            window.location.replace(domain + "/teacher-school-event");
        }

        function teacher_announcement_page() {
            window.location.replace(domain + "/teacher-home");
        }

        function student_event_page() {
            window.location.replace(domain + "/student-school-event");
        }

        function student_clubs_page() {
            window.location.replace(domain + "/student-clubs");
        }

        function leave2(clicked){
            var name = clicked.split("leave");
            name = name[1];
            var val = confirm("Do you want to leave " + name + "?")
            if (val == true){
                document.getElementById("leave" + name).click();
            }
        }

    </script>


</head>

<body>
    <button onClick="student_event_page()">Events</button>
    <button onClick="redirect_to_student_home_page()">Announcements</button>
    <button onClick="student_clubs_page()">Clubs</button>
    <form method="POST">

        {% csrf_token %}

        <button name="yourClubs" type="submit">Your Clubs</button>
        <button name="otherClubs" type="submit">Other Clubs</button> <br>


        {% for club in clubs %}

        <h1>{{club.name}}</h1>
        <h4>{{club.description}}</h4>

        {% if yourClubs2 %}
        <button name="view{{club.id}}" type="submit">View</button>
        <button onClick="leave2(this.id)" id="leave{{club.name}}leave" type="button">Leave</button>
        <button name="leave{{club.name}}" id="leave{{club.name}}" type="submit" style="visibility:hidden;">Leave</button>
        {% else %}
        <button name="join{{club.id}}" type="submit">Join</button>
        {% endif %}

        {% endfor %}

    </form>


    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
        integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
        crossorigin="anonymous"></script>
</body>

</html>